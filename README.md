# 아이템매니아

### 정의

- **게임아이템/게임머니/계정**을 **현금**으로 **거래** 할 수 있는 사이트

### 왜 생겼는가? 

- 게임머니로 아이템을 구매하기에는 **아이템의 가치**가 너무 높아 **현금**으로 거래가 필요.
- **거래를 중개**해주는 사이트 생성.
- 사이트는 중개를 통한 거래 **안전성**을 **대가**로 판매금액의 일정금액을 **수수료**로 취함.

### 이용자

- **성인인증**을 받은 이용자들은 자유로운 형식의 제목으로 거래/구매 글을 등록 할 수 있다.


# 이 데이터가 유용한 이유

1. 하루 이용자 **건수가 많고** **게임도 다양**하다. [밑에 참조](https://bit.ly/2DWkbK1)
2. 원래는 현재 상태의 게임시세만 알 수 있다. (그동안의 시세를 보고 판단할 수 있는 데이터가 없다.)
3. 이 데이터를 따라서 **게임시세변동**을 알 수 있다.
4. **현재가 최저가인지 최고가인지 판단**할 수 있게 된다.

> 찾아본 바로는 아직 위와 같은 주제의 자료를 찾지 못했다. 그래서 직접 해보았다.

# 구현방법

1. 우선 **판매자,구매자** 모두 해당 아이템의 **최저가**를 알아야한다.
2. 사이트에서 크롤링 할때 **데이터 분류에 필요한 정보**를 찾는다.
3. **판매하는 방법**에서 **분류**를 하므로 어느 정도까지 분류 되어있는지 찾아본다. [밑에 참조](https://bit.ly/2vIk2oZ)
4. 판매등록에서 **게임명-서버명-물품종류**의 카테고리로 구분되어 있다.
5. 3개의 키워드로 구분하여 데이터를 분류하여 저장.
6. 판매정보에서 얻을 수 있는 정보를 찾는다. [밑에 참조](https://bit.ly/2Jn2eru)
7. **추가적으로 물품제목, 등록일시, 거래번호, 단위금액**을 구할 수 있다.
8. **아이템 목록**과 비교하여 데이터화. (바로 밑에 참조)


# 아이템 목록 
 - Octoparse 사용한 크롤링 [구현방법](https://github.com/chanp5660/Util_chanp5660/tree/master/Octoparse)
 - 아이템목록 [csv](https://github.com/chanp5660/Util_chanp5660/blob/master/Octoparse/ItemList.csv)

# 스케줄링(scheduling)

windows10에 기본 프로그램인 **작업 스케줄러**를 사용해서 매일 반복 시킬 수 있다.

- 여기서 문제가 발생했는데 일반 파일 저장은 가능하나 Rselenium을 사용한 R파일은 작동하지 않았다. Sys.sleep()함수를 이용해서 데이터를 얻었다.
[수정중](https://github.com/chanp5660/BigData/tree/master/chan/R_Task_Scheduler)

#### [실제 코드와 예제](https://github.com/chanp5660/BigData/blob/master/chan/Rcode_example.md)

### 판매공고 올리는 방법

1. 게임-서버-물품종류 선택  

![카테고리](https://user-images.githubusercontent.com/46266247/57274624-c4e27b00-70d6-11e9-8fdb-e1828199c446.JPG)

2. 나머지 사항 작성

![팝니다](https://user-images.githubusercontent.com/46266247/57274715-096e1680-70d7-11e9-8114-cc8a27db12de.JPG)

(유로 서비스 추가시 **문자효과**, **자동재등록**)

![유료](https://user-images.githubusercontent.com/46266247/57274796-55b95680-70d7-11e9-96f1-a9628d29263a.JPG)

### 판매정보

카테고리를 외에도 추가적으로 등록일시, 거래번호

![판매정보](https://user-images.githubusercontent.com/46266247/57275602-ff99e280-70d9-11e9-89bb-e2619ac41430.JPG)


### 이용건수
비인기 게임 한개의 서버에서 5시간 정도 평균 400개 정도의 판매공고가 올라온다.
이후 모든 게임 모든 서버의 하루 이용건수를 구해 추가정보를 넣을 예정 **( 게임 3234개 )**

문제 발생 : 위의 판매등록 방법에서 보면 재등록을  똑같은 사람이 재등록해서 올라온 판매공고를 중복제거해야하는지 인정해야 하는지 구분지어야 함.











# 외부 데이터

외부 데이터 특정 게임 사이트 방문 후 아이템 정보 얻기 (http://maple.inven.co.kr/dataninfo/item/) 이용하여 직업마다 아이템 정보를 얻는다.

![인벤1](https://user-images.githubusercontent.com/46266247/57365920-f9326600-71c0-11e9-8463-f9a85128e26d.PNG)

![인벤](https://user-images.githubusercontent.com/46266247/57365798-b96b7e80-71c0-11e9-8ce0-a9239f36ccd6.PNG)

자동알림
> 시세의 어느 정도가 되는 아이템이 판매공고가 올라오면 알려준다.

=> 어플화

